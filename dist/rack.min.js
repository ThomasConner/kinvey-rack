!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.Rack=e()}}(function(){return function e(r,n,t){function i(u,a){if(!n[u]){if(!r[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[u]={exports:{}};r[u][0].call(l.exports,function(e){var n=r[u][1][e];return i(n?n:e)},l,l.exports,e,r,n,t)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<t.length;u++)i(t[u]);return i}({1:[function(e,r,n){"use strict";var t=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],t=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(f){i=!0,o=f}finally{try{!t&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),u=e("ascii-tree"),a=function(e){function r(r,n,t,i){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}(function(e,r,n,i){var o=this;if(-1>e||e>=r.length)throw new Error("Index "+e+" is out of bounds.");var u=r[e];return u.handle(n,i).then(function(n){var i=t(n,2),u=i[0],f=i[1];return e+=1,e<r.length?a.call(o,e,r,u,f):[u,f]})}),f=function(){function e(){var r=void 0===arguments[0]?"Rack":arguments[0],n=void 0===arguments[1]?[]:arguments[1];i(this,e),Array.isArray(r)&&(n=r,r="Rack"),Array.isArray(n)||(n=[]),this.name=r,this._middlewares=n}return o(e,[{key:"middlewares",get:function(){return this._middlewares.slice()}},{key:"getMiddleware",value:function(){var e=void 0===arguments[0]?-1:arguments[0],r=this.middlewares;if(!_.isNumber(e)){var n=e;e=Array.findIndex(r,function(e){return e instanceof n})}if(-1>e||e>=r.length)throw new Error("Index "+e+" is out of bounds.");return r[e]}},{key:"use",value:function(e){null!==e&&void 0!==e&&this._middlewares.push(e)}},{key:"useBefore",value:function(e,r){var n=this.middlewares,t=Array.findIndex(n,function(r){return r instanceof e});t>-1&&(n.splice(t,0,r),this._middlewares=n)}},{key:"useAfter",value:function(e,r){var n=this.middlewares,t=Array.findIndex(n,function(r){return r instanceof e});t>-1&&(n.splice(t+1,0,r),this._middlewares=n)}},{key:"swap",value:function(e,r){var n=this.middlewares,t=Array.findIndex(n,function(r){return r instanceof e});t>-1&&(n.splice(t,1,r),this._middlewares=n)}},{key:"remove",value:function(e){var r=this.middlewares,n=Array.findIndex(r,function(r){return r instanceof e});n>-1&&(r.splice(n,1),this._middlewares=r)}},{key:"execute",value:function(e){var r=this.middlewares;return r.length>0?a.call(this,0,r,e):void 0}},{key:"handle",value:function(e){return this.execute(e)}},{key:"toString",value:function(){var e,r,n,t=void 0===arguments[0]?0:arguments[0],i=this.middlewares,o="";for(e=0;t>=e;e++)o+="#";for(o+=this.name,e=0,r=i.length;r>e;e++)n=i[e],o+="\n"+n.toString(t+1);if(t>0)return o;try{return u.generate(o)}catch(a){return o}}}]),e}();r.exports=f},{"ascii-tree":2}],2:[function(e,r,n){function t(e){var r=a.parse(e);return o(r,!0)}function i(e,r){var n,t="\r\n",i=r?l:f;if(0==e.level)return e.value;for(n=1;n<e.level;++n)t+=u[n]?" ":d,t+="  ";return t+i+s+" "+e.value}function o(e,r){var n,t=i(e,r);return e.nodes&&(n=e.nodes.length-1,e.nodes.forEach(function(e,r){u[e.level]=r==n,t+=o(e,r==n)})),t}var u=[],a=e("freetree"),f=String.fromCharCode(9500),s=String.fromCharCode(9472),l=String.fromCharCode(9492),d=String.fromCharCode(9474);n.generate=t},{freetree:3}],3:[function(e,r,n){function t(e,r){i(r);var n=o(e);return u(n),l(n)}function i(e){var r,n;if(e)for(r in d)n=e[r],n&&(d[r]=n)}function o(e){var r=e.split(/[\r\n]+/);return r.filter(function(e){return""!=e.trim()})}function u(e){f(e)}function a(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function f(e){var r=a(d.leadingChar),n=new RegExp("^"+r+"[^"+r+"]");if(pattern=new RegExp("^"+r+"[^"+r+"].*$"),roots=e.filter(function(e){return pattern.test(e)}),roots.length>1)throw new Error("Only single root node is allowed!");if(!n.test(e[0]))throw new Error("The root node should be the first node!")}function s(e){var r=a(d.leadingChar),n=new RegExp("^("+r+"+)(.+)$"),t=e.match(n);return{level:t[1].length-1,value:t[2]}}function l(e){var r,n,t={},i=[],o=e.length;for(r=0;o>r;++r)if(n=s(e[r]),0!=i.length){for(;i[0].level>=n.level;)i.shift();i[0].nodes||(i[0].nodes=[]),i[0].nodes.push(n),i.unshift(n)}else t=n,i.unshift(t);return t}var d={leadingChar:"#"};n.parse=t},{}]},{},[1])(1)});